- name: Commit e publicar calendar.ics direto na main
  env:
    PAT_TOKEN: ${{ secrets.PAT_TOKEN }}
  run: |
    echo "ðŸ”¹ Git status antes de commitar"
    git status

    echo "ðŸ”¹ Configurando Git user"
    git config --local user.name "github-actions[bot]"
    git config --local user.email "github-actions[bot]@users.noreply.github.com"
    git config --local --list

    echo "ðŸ”¹ Adicionando calendar.ics"
    git add calendar.ics

    echo "ðŸ”¹ Commitando alteraÃ§Ãµes"
    git commit -m "Atualizar ICS HLTV" || echo "Nada para commitar"

    echo "ðŸ”¹ Verificando remote URL"
    git remote -v

    echo "ðŸ”¹ Tentando push usando PAT"
    set -x  # habilita print dos comandos
    git push https://$PAT_TOKEN@github.com/${{ github.repository }}.git main
    set +x
